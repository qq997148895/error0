<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>个人资料</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/mui.min.css" />
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/base.css" />
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/public.css" />
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/announcement.css" />
		<script src="__PUBLIC__/Home/js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="__PUBLIC__/Home/js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="__PUBLIC__/Home/js/flexible.js" type="text/javascript" charset="utf-8"></script>
		<script src="__PUBLIC__/Home/layer/layer.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			// H5 plus事件处理
			function plusReady() {
				// 设置系统状态栏背景为红色
				plus.navigator.setStatusBarBackground('#409BFE');
                plus.navigator.setStatusBarStyle('light');
			}
			if(window.plus) {
				plusReady();
			} else {
				document.addEventListener('plusready', plusReady, false);
			}
		</script>
	</head>
    <style type="text/css">
    	.personal_box{margin: 50px 0;}
    	.personal_box p{padding: 0 .2rem;border-bottom: 1px solid #999;display: flex;}
    	.personal_box p span{flex: 1;width: 2rem;max-width: 2rem;min-width: 2rem;color: #333;line-height: 40px;font-size: .36rem;}
    	.personal_box p input{border: none;margin: 0;flex: 5;}
    </style>
	<body>
		<header class="mui-bar mui-bar-nav">
			<a href="/Home/Mymessage/myinfo" class="mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">个人资料</h1>
		</header>
		<div class="personal_box">
			<p><span>真实姓名：</span><input type="text" name="user_truename" id="user_truename" value="{$userinfo.user_truename}" /></p>
			<p><span>用户名：</span><input type="text" name="user_name" id="user_name" value="{$userinfo.user_name}"  /></p>
			<p><span>手机号：</span><input type="text" name="user_phone" id="user_phone" value="{$userinfo.user_phone}" /></p>
			<p><span>开户行：</span><input type="text" name="card_kaihu" id="card_kaihu" value="{$idcardinfo.card_kaihu}" /></p>
			<p><span>银行卡号：</span><input type="text" name="id_card" id="id_card" value="{$idcardinfo.id_card}" /></p>
			<p><span>支付宝号：</span><input type="text" name="ali_num" id="ali_num" value="{$aliinfo.ali_num}" /></p>
			<p><span>支付密码：</span><input type="password" name="user_secpwd_old" id="user_secpwd_old"  /></p>
			<p><span>确认密码：</span><input type="password" name="user_secpwd" id="user_secpwd"  /></p>

			<p><span>性别：</span>
			 <select class="form-control" id="user_sex" name="user_sex">
			      <option value="1" selected>男</option>
			      <option value="2" >女</option>
			  </select>
			</p>

			<button  type="submit" id="submit" name="submit" class="btn btn-default">提交</button>
		</div>

		
	</body>
	<script type="text/javascript">
		$('#submit').click(function() {
			//获取文本框的值
			var user_name=$("#user_name").val();
			var user_phone=$("#user_phone").val();
			var card_kaihu=$("#card_kaihu").val();
			var id_card=$("#id_card").val();
			var ali_num=$("#ali_num").val();
			var user_truename=$("#user_truename").val();
			var user_sex=$("#user_sex").val();
			var user_secpwd_old=$("#user_secpwd_old").val();
			var user_secpwd=$("#user_secpwd").val();

			mui.confirm('除资金密码外，其他个人资料一经提交不可修改，请确认信息填写无误?', '提示' , ['确定', '取消'] , function(e) {
				if(e.index != 1) {
					$.ajax({
						url: '/Home/Mymessage/savePersonalData',
						data: {
							user_name: user_name,
							user_phone: user_phone,
							card_kaihu: card_kaihu,
							id_card: id_card,
							ali_num: ali_num,
							user_truename: user_truename,
							user_sex: user_sex,
							user_secpwd_old:user_secpwd_old,
							user_secpwd:user_secpwd
						},
						dataType: 'json',
						type: 'post',
						success: function(data) {
							if(data.status == 1) {
								mui.alert(data.info, function() {
									window.location.href = "/Home/Mymessage/personalData";
								});
							} if (data.status==0)  {
								mui.alert(data.info);
							}
						}
					});
				}
			});
		})
	</script>

</html>